(()=>{var e={};e.id=808,e.ids=[808],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},6750:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var a=r(260),s=r(8203),n=r(5155),o=r.n(n),i=r(7292),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d=["",{children:["citas",{children:["agendar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5135)),"C:\\Users\\USER\\Proyectos Personales Software\\v3-saas-factory\\saas-factory-setup\\saas-factory\\src\\app\\citas\\agendar\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1354)),"C:\\Users\\USER\\Proyectos Personales Software\\v3-saas-factory\\saas-factory-setup\\saas-factory\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,1485,23)),"next/dist/client/components/unauthorized-error"]}],c=["C:\\Users\\USER\\Proyectos Personales Software\\v3-saas-factory\\saas-factory-setup\\saas-factory\\src\\app\\citas\\agendar\\page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/citas/agendar/page",pathname:"/citas/agendar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1964:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"40e133e3352ef254982cf3dc84f7b2450facd8f072":()=>n});var a=r(1590);r(376);var s=r(5687);async function n(e){try{let t=(0,s.U)(),{data:r,error:a}=await t.from("patients").insert({name:e.patientName,phone:e.patientPhone,email:e.patientEmail||null}).select().single();if(a)throw console.error("Patient creation error:",a),Error("Error al crear registro del paciente");let{data:n,error:o}=await t.from("appointments").insert({doctor_id:e.doctorId,patient_id:r.id,appointment_date:e.appointmentDate,start_time:e.startTime,end_time:e.endTime,status:"pending"}).select().single();if(o)throw console.error("Appointment creation error:",o),Error("Error al crear la cita");return{success:!0,appointment:n,message:"Cita agendada con \xe9xito. Te enviaremos confirmaci\xf3n por WhatsApp."}}catch(e){return console.error("Booking error:",e),{success:!1,error:e instanceof Error?e.message:"Error al agendar la cita",appointment:null}}}(0,r(9344).D)([n]),(0,a.A)(n,"40e133e3352ef254982cf3dc84f7b2450facd8f072",null)},6925:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3219,23)),Promise.resolve().then(r.t.bind(r,4863,23)),Promise.resolve().then(r.t.bind(r,5155,23)),Promise.resolve().then(r.t.bind(r,802,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,8530,23)),Promise.resolve().then(r.t.bind(r,8921,23))},541:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6959,23)),Promise.resolve().then(r.t.bind(r,3875,23)),Promise.resolve().then(r.t.bind(r,8903,23)),Promise.resolve().then(r.t.bind(r,7174,23)),Promise.resolve().then(r.t.bind(r,4178,23)),Promise.resolve().then(r.t.bind(r,7190,23)),Promise.resolve().then(r.t.bind(r,1365,23))},2056:(e,t,r)=>{Promise.resolve().then(r.bind(r,5135))},1784:(e,t,r)=>{Promise.resolve().then(r.bind(r,1772))},8717:()=>{},2685:()=>{},1772:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(5512),s=r(8009),n=r(6248);let o=(0,n.createServerReference)("40e133e3352ef254982cf3dc84f7b2450facd8f072",n.callServer,void 0,n.findSourceMapURL,"createAppointmentBooking");function i(){let[e,t]=(0,s.useState)(1),[r,n]=(0,s.useState)({name:"",phone:"",email:"",doctorId:"dr-juan-perez",doctorName:"Dr. Juan P\xe9rez",specialty:"Medicina General",date:"2026-02-04",startTime:"09:00:00",endTime:"09:30:00"}),[i,d]=(0,s.useState)(!1),[u,p]=(0,s.useState)(!1),x=()=>t(e+1),h=()=>t(e-1),b=async e=>{e.preventDefault(),d(!0);try{let e=await o({doctorId:r.doctorId,patientName:r.name,patientPhone:r.phone,patientEmail:r.email,appointmentDate:r.date,startTime:r.startTime,endTime:r.endTime});e.success?p(!0):alert(`Error: ${e.error}`)}catch(e){console.error("Error booking appointment:",e),alert("Error al agendar la cita. Por favor intenta de nuevo.")}finally{d(!1)}};return u?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4 text-green-500",children:"✅"}),(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"\xa1Cita agendada con \xe9xito!"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Te hemos enviado una confirmaci\xf3n por WhatsApp."}),(0,a.jsx)("button",{onClick:()=>window.location.href="/citas",className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold",children:"Volver al inicio"})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,a.jsx)("span",{className:e>=1?"text-blue-600 font-semibold":"text-gray-400",children:"1. Doctor"}),(0,a.jsx)("span",{className:e>=2?"text-blue-600 font-semibold":"text-gray-400",children:"2. Horario"}),(0,a.jsx)("span",{className:e>=3?"text-blue-600 font-semibold":"text-gray-400",children:"3. Confirmar"})]}),(0,a.jsx)("div",{className:"h-2 bg-gray-200 rounded-full",children:(0,a.jsx)("div",{className:"h-2 bg-blue-600 rounded-full transition-all",style:{width:`${e/3*100}%`}})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[1===e&&(0,a.jsx)(l,{onNext:(e,t)=>{n({...r,doctorName:e,specialty:t}),x()}}),2===e&&(0,a.jsx)(c,{onNext:e=>{n({...r,startTime:e}),x()},onBack:h}),3===e&&(0,a.jsx)(m,{formData:r,setFormData:e=>n({...r,...e}),onBack:h,onSubmit:b,isSubmitting:i})]})]})})}function l({onNext:e}){return(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:"Selecciona tu doctor"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(d,{name:"Dr. Juan P\xe9rez",specialty:"Medicina General",onClick:()=>e("Dr. Juan P\xe9rez","Medicina General")}),(0,a.jsx)(d,{name:"Dra. Mar\xeda Gonz\xe1lez",specialty:"Odontolog\xeda",onClick:()=>e("Dra. Mar\xeda Gonz\xe1lez","Odontolog\xeda")})]})]})}function d({name:e,specialty:t,onClick:r}){return(0,a.jsxs)("button",{onClick:r,className:"w-full flex items-center p-4 border rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all text-left",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-full mr-4 flex items-center justify-center text-xl",children:"\uD83D\uDC64"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-lg text-gray-900",children:e}),(0,a.jsx)("p",{className:"text-gray-600",children:t})]})]})}function c({onNext:e,onBack:t}){return(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:"\xbfCu\xe1ndo quieres tu cita?"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[(0,a.jsx)("button",{className:"p-4 border-2 border-blue-500 rounded-lg font-semibold text-blue-600",children:"Hoy"}),(0,a.jsx)("button",{className:"p-4 border-2 border-gray-300 rounded-lg hover:border-blue-500 text-gray-600",children:"Ma\xf1ana"}),(0,a.jsx)("button",{className:"p-4 border-2 border-gray-300 rounded-lg hover:border-blue-500 text-gray-600",children:"Vie 7"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-3 mb-8",children:[(0,a.jsx)("button",{className:"p-3 bg-blue-600 text-white rounded-lg",onClick:()=>e("09:00:00"),children:"9:00 AM"}),(0,a.jsx)("button",{className:"p-3 bg-blue-600 text-white rounded-lg",onClick:()=>e("10:00:00"),children:"10:00 AM"}),(0,a.jsx)("button",{className:"p-3 bg-gray-200 text-gray-400 rounded-lg",disabled:!0,children:"11:00 AM"}),(0,a.jsx)("button",{className:"p-3 bg-blue-600 text-white rounded-lg",onClick:()=>e("15:00:00"),children:"3:00 PM"})]}),(0,a.jsx)("button",{onClick:t,className:"text-gray-600 font-medium",children:"← Cambiar doctor"})]})}function m({formData:e,setFormData:t,onBack:r,onSubmit:s,isSubmitting:n}){return(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:"Confirma tu cita"}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[(0,a.jsx)("p",{className:"font-semibold text-lg mb-2 text-gray-900",children:e.doctorName}),(0,a.jsx)("p",{className:"text-gray-600",children:e.specialty}),(0,a.jsxs)("p",{className:"text-gray-600 mt-4",children:[(0,a.jsx)("strong",{children:"Fecha:"})," ",e.date,(0,a.jsx)("br",{}),(0,a.jsx)("strong",{children:"Hora:"})," ",e.startTime]})]}),(0,a.jsxs)("form",{onSubmit:s,className:"space-y-4 mb-6",children:[(0,a.jsx)("input",{type:"text",placeholder:"Tu nombre completo",className:"w-full px-4 py-3 border rounded-lg text-gray-900",value:e.name,onChange:e=>t({name:e.target.value}),required:!0}),(0,a.jsx)("input",{type:"tel",placeholder:"WhatsApp",className:"w-full px-4 py-3 border rounded-lg text-gray-900",value:e.phone,onChange:e=>t({phone:e.target.value}),required:!0}),(0,a.jsx)("input",{type:"email",placeholder:"Email (opcional)",className:"w-full px-4 py-3 border rounded-lg text-gray-900",value:e.email,onChange:e=>t({email:e.target.value})}),(0,a.jsx)("button",{type:"submit",disabled:n,className:"w-full bg-blue-600 text-white py-4 rounded-lg text-lg font-semibold hover:bg-blue-700 disabled:bg-blue-300 transition-colors",children:n?"Confirmando...":"Confirmar cita →"})]}),(0,a.jsx)("button",{onClick:r,className:"text-gray-600 font-medium",children:"← Cambiar horario"})]})}},5135:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\USER\\\\Proyectos Personales Software\\\\v3-saas-factory\\\\saas-factory-setup\\\\saas-factory\\\\src\\\\app\\\\citas\\\\agendar\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\USER\\Proyectos Personales Software\\v3-saas-factory\\saas-factory-setup\\saas-factory\\src\\app\\citas\\agendar\\page.tsx","default")},1354:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>s});var a=r(2740);r(1135);let s={title:"Flash Clinic V3",description:"Motor de Adquisici\xf3n M\xe9dica"};function n({children:e}){return(0,a.jsx)("html",{lang:"es",children:(0,a.jsx)("body",{className:"antialiased",children:e})})}},5687:(e,t,r)=>{"use strict";r.d(t,{U:()=>n});var a=r(6876),s=r(2385);async function n(){let e=await (0,s.UL)();return(0,a.createServerClient)("https://yrlxpabmxezbcftxqivs.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlybHhwYWJteGV6YmNmdHhxaXZzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk1NjI5NzEsImV4cCI6MjA4NTEzODk3MX0.6Rh8UKoGJfRKkxaZ8jeWzeRB0D81ViY0fKCt-A8ucLg",{cookies:{getAll:()=>e.getAll(),setAll(t){try{t.forEach(({name:t,value:r,options:a})=>e.set(t,r,a))}catch{}}}})}},1135:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[10,403,996],()=>r(6750));module.exports=a})();