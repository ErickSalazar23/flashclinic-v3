(()=>{var e={};e.id=85,e.ids=[85],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},1122:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>l,routeModule:()=>u,tree:()=>c});var s=r(260),a=r(8203),i=r(5155),n=r.n(i),o=r(7292),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(t,d);let c=["",{children:["(main)",{children:["pendientes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8123)),"C:\\Users\\USER\\Proyectos Personales Software\\v3-saas-factory\\saas-factory-setup\\saas-factory\\src\\app\\(main)\\pendientes\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8179)),"C:\\Users\\USER\\Proyectos Personales Software\\v3-saas-factory\\saas-factory-setup\\saas-factory\\src\\app\\(main)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,1485,23)),"next/dist/client/components/unauthorized-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,1354)),"C:\\Users\\USER\\Proyectos Personales Software\\v3-saas-factory\\saas-factory-setup\\saas-factory\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,1485,23)),"next/dist/client/components/unauthorized-error"]}],l=["C:\\Users\\USER\\Proyectos Personales Software\\v3-saas-factory\\saas-factory-setup\\saas-factory\\src\\app\\(main)\\pendientes\\page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(main)/pendientes/page",pathname:"/pendientes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4529:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"40c33955115d2f82d3f36823eddb588bf498291f60":()=>s.t9,"40d5ce43ce3b2e5ca2823deb6a5747f3a96a0aca79":()=>s.u8,"606484aa8a8ccada3f198411d84ab3256cd2cfb329":()=>s.s$});var s=r(3677)},7817:(e,t,r)=>{Promise.resolve().then(r.bind(r,3199)),Promise.resolve().then(r.bind(r,1798)),Promise.resolve().then(r.bind(r,6886)),Promise.resolve().then(r.bind(r,5937))},8089:(e,t,r)=>{Promise.resolve().then(r.bind(r,63)),Promise.resolve().then(r.bind(r,4850)),Promise.resolve().then(r.bind(r,3850)),Promise.resolve().then(r.bind(r,3157))},4621:(e,t,r)=>{Promise.resolve().then(r.bind(r,6886)),Promise.resolve().then(r.bind(r,5937))},9885:(e,t,r)=>{Promise.resolve().then(r.bind(r,3850)),Promise.resolve().then(r.bind(r,3157))},6248:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{callServer:function(){return s.callServer},createServerReference:function(){return i},findSourceMapURL:function(){return a.findSourceMapURL}});let s=r(7295),a=r(2035),i=r(8832).createServerReference},63:(e,t,r)=>{"use strict";r.d(t,{DecisionCard:()=>c});var s=r(5512);let a={prospect_review:"Revisi\xf3n de Prospecto",follow_up:"Seguimiento",deal_approval:"Aprobaci\xf3n de Deal",treatment_plan:"Plan de Tratamiento"},i={high:"Alta",medium:"Media",low:"Baja"};var n=r(6248);let o=(0,n.createServerReference)("606484aa8a8ccada3f198411d84ab3256cd2cfb329",n.callServer,void 0,n.findSourceMapURL,"updateDecisionStatus");var d=r(8009);function c({decision:e,onUpdate:t}){let[r,n]=(0,d.useTransition)();return(0,s.jsxs)("div",{className:`card border-l-4 ${{high:"border-l-red-500",medium:"border-l-yellow-500",low:"border-l-blue-500"}[e.priority]} ${r?"opacity-50":""}`,children:[(0,s.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"badge bg-slate-700 text-slate-300",children:a[e.type]}),(0,s.jsx)("span",{className:`badge ${"high"===e.priority?"badge-critical":"medium"===e.priority?"badge-moderate":"badge-stable"}`,children:i[e.priority]})]}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-1 truncate",children:e.title}),(0,s.jsx)("p",{className:"text-slate-400 text-sm mb-3 line-clamp-2",children:e.description}),e.prospectName&&(0,s.jsxs)("p",{className:"text-sm text-slate-500",children:["Prospecto: ",(0,s.jsx)("span",{className:"text-slate-300",children:e.prospectName})]}),e.dueDate&&(0,s.jsxs)("p",{className:"text-sm text-slate-500 mt-1",children:["Vence: ",(0,s.jsx)("span",{className:"text-slate-300",children:new Date(e.dueDate).toLocaleDateString("es-ES")})]})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-slate-700",children:[(0,s.jsx)("button",{onClick:()=>{n(async()=>{await o(e.id,"APPROVED"),t?.()})},disabled:r,className:"btn btn-primary flex-1",children:"Aprobar"}),(0,s.jsx)("button",{onClick:()=>{n(async()=>{await o(e.id,"REJECTED"),t?.()})},disabled:r,className:"btn btn-danger flex-1",children:"Rechazar"}),(0,s.jsx)("button",{onClick:()=>{n(async()=>{await o(e.id,"DEFERRED"),t?.()})},disabled:r,className:"btn btn-ghost",children:"Diferir"})]})]})}},4850:(e,t,r)=>{"use strict";r.d(t,{DecisionsPageClient:()=>n});var s=r(5512),a=r(63),i=r(9334);function n({decisions:e}){let t=(0,i.useRouter)(),r=()=>{t.refresh()},n=e.filter(e=>"high"===e.priority),o=e.filter(e=>"medium"===e.priority),d=e.filter(e=>"low"===e.priority);return(0,s.jsxs)("div",{className:"space-y-8",children:[n.length>0&&(0,s.jsxs)("section",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-red-400 mb-4 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),"Prioridad Alta (",n.length,")"]}),(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:n.map(e=>(0,s.jsx)(a.DecisionCard,{decision:e,onUpdate:r},e.id))})]}),o.length>0&&(0,s.jsxs)("section",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-yellow-400 mb-4 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),"Prioridad Media (",o.length,")"]}),(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:o.map(e=>(0,s.jsx)(a.DecisionCard,{decision:e,onUpdate:r},e.id))})]}),d.length>0&&(0,s.jsxs)("section",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-blue-400 mb-4 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Prioridad Baja (",d.length,")"]}),(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:d.map(e=>(0,s.jsx)(a.DecisionCard,{decision:e,onUpdate:r},e.id))})]})]})}},3850:(e,t,r)=>{"use strict";r.d(t,{PageLoading:()=>a});var s=r(5512);function a({message:e="Cargando..."}){return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-12 h-12 border-4 border-slate-700 rounded-full"}),(0,s.jsx)("div",{className:"absolute top-0 left-0 w-12 h-12 border-4 border-blue-500 rounded-full border-t-transparent animate-spin"})]}),(0,s.jsx)("p",{className:"text-slate-400 text-sm",children:e})]})}},3157:(e,t,r)=>{"use strict";r.d(t,{Sidebar:()=>c});var s=r(5512),a=r(8531),i=r.n(a),n=r(9334),o=r(3746);let d=[{href:"/dashboard",label:"Dashboard",icon:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})},{href:"/prospects",label:"Prospectos",icon:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})})},{href:"/pendientes",label:"Pendientes",icon:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})},{href:"/agents",label:"Agentes AI",icon:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}];function c(){let e=(0,n.usePathname)(),t=(0,n.useRouter)(),r=(0,o.U)(),a=async()=>{await r.auth.signOut(),t.push("/login"),t.refresh()};return(0,s.jsx)("aside",{className:"fixed left-0 top-0 z-40 h-screen w-64 bg-slate-900 border-r border-slate-800",children:(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 px-6 py-5 border-b border-slate-800",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-lg font-bold text-white",children:"Flash Clinic"}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"v3.0"})]})]}),(0,s.jsx)("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:d.map(t=>{let r=e===t.href||e.startsWith(t.href+"/");return(0,s.jsxs)(i(),{href:t.href,className:`flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all ${r?"bg-blue-500/10 text-blue-400":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[t.icon,(0,s.jsx)("span",{className:"font-medium",children:t.label})]},t.href)})}),(0,s.jsx)("div",{className:"p-4 border-t border-slate-800",children:(0,s.jsxs)("button",{onClick:a,className:"flex items-center gap-3 w-full px-3 py-2.5 rounded-lg text-slate-400 hover:bg-slate-800 hover:text-white transition-all",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,s.jsx)("span",{className:"font-medium",children:"Cerrar Sesi\xf3n"})]})})]})})}},3677:(e,t,r)=>{"use strict";r.d(t,{s$:()=>n,t9:()=>o,u8:()=>i});var s=r(8977);r(8063);var a=r(5546);async function i(e={}){try{let t=(await (0,a.U)()).from("decisions").select("*").order("created_at",{ascending:!1});e.status&&(t=t.eq("status",e.status)),e.type&&(t=t.eq("type",e.type)),e.priority&&(t=t.eq("priority",e.priority));let{data:r,error:s}=await t;if(s)return console.error("Error fetching decisions:",s),{ok:!1,error:s.message};let i=(r||[]).map(e=>({id:e.id,createdAt:e.created_at,updatedAt:e.updated_at,type:e.type,status:e.status,priority:e.priority,title:e.title,description:e.description,prospectId:e.prospect_id,prospectName:e.prospect_name,dueDate:e.due_date,decidedAt:e.decided_at,decidedBy:e.decided_by,metadata:e.metadata}));return{ok:!0,data:i}}catch(e){return console.error("Unexpected error:",e),{ok:!1,error:"Error inesperado al cargar decisiones"}}}async function n(e,t){try{let r=await (0,a.U)(),{data:{user:s}}=await r.auth.getUser(),{data:i,error:n}=await r.from("decisions").update({status:t,decided_at:new Date().toISOString(),decided_by:s?.email||"unknown",updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n)return console.error("Error updating decision:",n),{ok:!1,error:n.message};let o={id:i.id,createdAt:i.created_at,updatedAt:i.updated_at,type:i.type,status:i.status,priority:i.priority,title:i.title,description:i.description,prospectId:i.prospect_id,prospectName:i.prospect_name,dueDate:i.due_date,decidedAt:i.decided_at,decidedBy:i.decided_by,metadata:i.metadata};return{ok:!0,data:o}}catch(e){return console.error("Unexpected error:",e),{ok:!1,error:"Error inesperado al actualizar decisi\xf3n"}}}async function o(e){try{let t=await (0,a.U)(),{data:{user:r}}=await t.auth.getUser();if(!r)return{ok:!1,error:"No autorizado"};let{data:s,error:i}=await t.from("decisions").insert({user_id:r.id,type:e.type,status:e.status,priority:e.priority,title:e.title,description:e.description,prospect_id:e.prospectId,prospect_name:e.prospectName,due_date:e.dueDate,metadata:e.metadata}).select().single();if(i)return console.error("Error creating decision:",i),{ok:!1,error:i.message};let n={id:s.id,createdAt:s.created_at,updatedAt:s.updated_at,type:s.type,status:s.status,priority:s.priority,title:s.title,description:s.description,prospectId:s.prospect_id,prospectName:s.prospect_name,dueDate:s.due_date,decidedAt:s.decided_at,decidedBy:s.decided_by,metadata:s.metadata};return{ok:!0,data:n}}catch(e){return console.error("Unexpected error:",e),{ok:!1,error:"Error inesperado al crear decisi\xf3n"}}}(0,r(6215).D)([i,n,o]),(0,s.A)(i,"40d5ce43ce3b2e5ca2823deb6a5747f3a96a0aca79",null),(0,s.A)(n,"606484aa8a8ccada3f198411d84ab3256cd2cfb329",null),(0,s.A)(o,"40c33955115d2f82d3f36823eddb588bf498291f60",null)},8179:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>i});var s=r(2740),a=r(2595);let i={title:"Flash Clinic V3",description:"Motor de Adquisici\xf3n M\xe9dica"};function n({children:e}){return(0,s.jsxs)("div",{className:"min-h-screen bg-slate-950",children:[(0,s.jsx)(a.Bx,{}),(0,s.jsx)("main",{className:"pl-64",children:(0,s.jsx)("div",{className:"p-8",children:e})})]})}},8123:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,dynamic:()=>d});var s=r(2740),a=r(6301),i=r(3677),n=r(2595);r(3199);var o=r(1798);let d="force-dynamic";async function c(){let e=await (0,i.u8)({status:"PENDING"});if(!e.ok)return(0,s.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,s.jsxs)("p",{className:"text-sm text-red-700",children:["Error al cargar pendientes: ",e.error]})});let t=e.data;return 0===t.length?(0,s.jsx)(n.pp,{title:"\xa1Todo al d\xeda!",description:"No tienes pendientes que requieran tu atenci\xf3n. Los nuevos items aparecer\xe1n aqu\xed cuando necesiten revisi\xf3n.",icon:(0,s.jsx)("svg",{className:"h-12 w-12 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}):(0,s.jsx)(o.DecisionsPageClient,{decisions:t})}function l(){return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Pendientes"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Items que requieren tu revisi\xf3n o aprobaci\xf3n"})]})}),(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)(n.WL,{message:"Cargando pendientes..."}),children:(0,s.jsx)(c,{})})]})}},3199:(e,t,r)=>{"use strict";r.d(t,{DecisionCard:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call DecisionCard() from the server but DecisionCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\USER\\Proyectos Personales Software\\v3-saas-factory\\saas-factory-setup\\saas-factory\\src\\features\\decisions\\components\\DecisionCard.tsx","DecisionCard")},1798:(e,t,r)=>{"use strict";r.d(t,{DecisionsPageClient:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call DecisionsPageClient() from the server but DecisionsPageClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\USER\\Proyectos Personales Software\\v3-saas-factory\\saas-factory-setup\\saas-factory\\src\\features\\decisions\\components\\DecisionsPageClient.tsx","DecisionsPageClient")},6886:(e,t,r)=>{"use strict";r.d(t,{PageLoading:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call PageLoading() from the server but PageLoading is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\USER\\Proyectos Personales Software\\v3-saas-factory\\saas-factory-setup\\saas-factory\\src\\shared\\components\\PageLoading.tsx","PageLoading")},5937:(e,t,r)=>{"use strict";r.d(t,{Sidebar:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call Sidebar() from the server but Sidebar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\USER\\Proyectos Personales Software\\v3-saas-factory\\saas-factory-setup\\saas-factory\\src\\shared\\components\\Sidebar.tsx","Sidebar")},2595:(e,t,r)=>{"use strict";r.d(t,{pp:()=>i,WL:()=>s.PageLoading,Bx:()=>n.Sidebar});var s=r(6886),a=r(2740);function i({title:e,description:t,icon:r,action:s}){return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[300px] text-center px-4",children:[r&&(0,a.jsx)("div",{className:"mb-4 text-slate-500",children:r}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:e}),(0,a.jsx)("p",{className:"text-slate-400 text-sm max-w-md mb-6",children:t}),s&&s]})}var n=r(5937)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,403,531,181,969,73],()=>r(1122));module.exports=s})();