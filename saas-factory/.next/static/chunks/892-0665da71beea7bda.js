"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[892],{6046:(e,a,s)=>{var t=s(6658);s.o(t,"usePathname")&&s.d(a,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}})},5828:(e,a,s)=>{Object.defineProperty(a,"__esModule",{value:!0}),function(e,a){for(var s in a)Object.defineProperty(e,s,{enumerable:!0,get:a[s]})}(a,{callServer:function(){return t.callServer},createServerReference:function(){return r},findSourceMapURL:function(){return l.findSourceMapURL}});let t=s(9603),l=s(3355),r=s(4979).createServerReference},6973:(e,a,s)=>{s.d(a,{PipelineBoard:()=>n});var t=s(5155),l=s(1124),r=s(6046);let i=[{stage:"agenda_detenida",title:"Agenda Detenida",color:"text-red-400",bgColor:"bg-red-500/10"},{stage:"diagnostico_proceso",title:"En Diagn\xf3stico",color:"text-orange-400",bgColor:"bg-orange-500/10"},{stage:"tratamiento_aplicado",title:"En Tratamiento",color:"text-blue-400",bgColor:"bg-blue-500/10"},{stage:"recuperacion_exitosa",title:"Recuperados",color:"text-green-400",bgColor:"bg-green-500/10"}];function n(e){let{prospects:a}=e,s=(0,r.useRouter)(),n=()=>{s.refresh()},c=e=>{console.log("Selected prospect:",e.id)},o=e=>a.filter(a=>a.stage===e),d=e=>e.reduce((e,a)=>e+a.dealValue,0),m=e=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:i.map(e=>{let a=o(e.stage),s=d(a);return(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"rounded-t-xl p-4 ".concat(e.bgColor),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("h3",{className:"font-semibold ".concat(e.color),children:e.title}),(0,t.jsx)("span",{className:"text-sm font-medium ".concat(e.color),children:a.length})]}),(0,t.jsxs)("p",{className:"text-xs text-slate-400",children:["Valor: ",m(s)]})]}),(0,t.jsx)("div",{className:"flex-1 bg-slate-800/30 rounded-b-xl p-3 space-y-3 min-h-[400px]",children:0===a.length?(0,t.jsx)("div",{className:"flex items-center justify-center h-32 text-slate-500 text-sm",children:"Sin prospectos"}):a.map(e=>(0,t.jsx)(l.ProspectCard,{prospect:e,onUpdate:n,onSelect:c},e.id))})]},e.stage)})})}},1124:(e,a,s)=>{s.d(a,{ProspectCard:()=>d});var t=s(5155),l=s(5828);let r=(0,l.createServerReference)("6094777ce2ff50ff62fe9e922325f1eb91e796c075",l.callServer,void 0,l.findSourceMapURL,"updateProspectStage");var i=s(2115);let n={agenda_detenida:"Agenda Detenida",diagnostico_proceso:"En Diagn\xf3stico",tratamiento_aplicado:"En Tratamiento",recuperacion_exitosa:"Recuperado"},c={critical:"border-l-red-500 bg-red-500/5",severe:"border-l-orange-500 bg-orange-500/5",moderate:"border-l-yellow-500 bg-yellow-500/5",stable:"border-l-green-500 bg-green-500/5"},o={critical:"badge-critical",severe:"badge-severe",moderate:"badge-moderate",stable:"badge-stable"};function d(e){var a,s;let{prospect:l,onUpdate:d,onSelect:m}=e,[u,p]=(0,i.useTransition)(),x=(null===(a=l.diagnostic)||void 0===a?void 0:a.severity)||"stable",b=(null===(s=l.diagnostic)||void 0===s?void 0:s.perdidaAnual)||0,h=e=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),g=e=>{p(async()=>{await r(l.id,e),null==d||d()})},j=(()=>{switch(l.stage){case"agenda_detenida":return"diagnostico_proceso";case"diagnostico_proceso":return"tratamiento_aplicado";case"tratamiento_aplicado":return"recuperacion_exitosa";default:return null}})();return(0,t.jsxs)("div",{className:"card border-l-4 cursor-pointer transition-all hover:scale-[1.02] ".concat(c[x]," ").concat(u?"opacity-50":""),onClick:()=>null==m?void 0:m(l),children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-3",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-semibold text-white truncate",children:l.doctorName}),(0,t.jsx)("p",{className:"text-sm text-slate-400 truncate",children:l.clinicName})]}),(0,t.jsx)("span",{className:"badge ".concat(o[x]),children:x})]}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-slate-500",children:"Especialidad"}),(0,t.jsx)("span",{className:"text-slate-300",children:l.specialty})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-slate-500",children:"Ciudad"}),(0,t.jsx)("span",{className:"text-slate-300",children:l.city})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-slate-500",children:"Hemorragia Anual"}),(0,t.jsx)("span",{className:"text-red-400 font-medium",children:h(b)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-slate-500",children:"Deal Value"}),(0,t.jsx)("span",{className:"text-green-400 font-medium",children:h(l.dealValue)})]})]}),j&&(0,t.jsx)("div",{className:"mt-4 pt-4 border-t border-slate-700",children:(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),g(j)},disabled:u,className:"btn btn-primary w-full text-sm",children:["Mover a ",n[j]]})})]})}},7376:(e,a,s)=>{s.d(a,{ProspectForm:()=>c});var t=s(5155),l=s(2115),r=s(5828);let i=(0,r.createServerReference)("40f27612fab4ffc97630191762bfe3bae57b2388b1",r.callServer,void 0,r.findSourceMapURL,"createProspect");var n=s(6046);function c(e){let{onSuccess:a,onCancel:s}=e,r=(0,n.useRouter)(),[c,o]=(0,l.useTransition)(),[d,m]=(0,l.useState)(null);return(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),m(null);let s=new FormData(e.currentTarget),t={doctorName:s.get("doctorName"),specialty:s.get("specialty"),clinicName:s.get("clinicName"),phone:s.get("phone"),email:s.get("email"),city:s.get("city"),citasSemanales:Number(s.get("citasSemanales")),ticketPromedio:Number(s.get("ticketPromedio")),noShowPercentage:Number(s.get("noShowPercentage")),slotsDisponibles:Number(s.get("slotsDisponibles")),horasConsulta:Number(s.get("horasConsulta")),notes:s.get("notes")};o(async()=>{let e=await i(t);if(!e.ok){m(e.error);return}r.refresh(),null==a||a()})},className:"space-y-6",children:[d&&(0,t.jsx)("div",{className:"rounded-md bg-red-500/10 border border-red-500/20 p-4",children:(0,t.jsx)("p",{className:"text-sm text-red-400",children:d})}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Informaci\xf3n del Doctor"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Nombre del Doctor *"}),(0,t.jsx)("input",{type:"text",name:"doctorName",required:!0,className:"input",placeholder:"Dr. Juan P\xe9rez"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Especialidad *"}),(0,t.jsx)("input",{type:"text",name:"specialty",required:!0,className:"input",placeholder:"Odontolog\xeda"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Nombre de la Cl\xednica *"}),(0,t.jsx)("input",{type:"text",name:"clinicName",required:!0,className:"input",placeholder:"Cl\xednica Dental Sonrisa"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Ciudad *"}),(0,t.jsx)("input",{type:"text",name:"city",required:!0,className:"input",placeholder:"Madrid"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Tel\xe9fono *"}),(0,t.jsx)("input",{type:"tel",name:"phone",required:!0,className:"input",placeholder:"+34 600 000 000"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Email *"}),(0,t.jsx)("input",{type:"email",name:"email",required:!0,className:"input",placeholder:"doctor@clinica.com"})]})]})]}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"M\xe9tricas de la Pr\xe1ctica"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Citas Semanales *"}),(0,t.jsx)("input",{type:"number",name:"citasSemanales",required:!0,min:"0",className:"input",placeholder:"40"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Ticket Promedio (EUR) *"}),(0,t.jsx)("input",{type:"number",name:"ticketPromedio",required:!0,min:"0",className:"input",placeholder:"150"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"% No-Show *"}),(0,t.jsx)("input",{type:"number",name:"noShowPercentage",required:!0,min:"0",max:"100",step:"0.1",className:"input",placeholder:"15"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Slots Disponibles/Semana *"}),(0,t.jsx)("input",{type:"number",name:"slotsDisponibles",required:!0,min:"0",className:"input",placeholder:"60"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Horas de Consulta/Semana *"}),(0,t.jsx)("input",{type:"number",name:"horasConsulta",required:!0,min:"0",className:"input",placeholder:"40"})]})]})]}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Notas"}),(0,t.jsx)("textarea",{name:"notes",rows:4,className:"input",placeholder:"Notas adicionales sobre el prospecto..."})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[s&&(0,t.jsx)("button",{type:"button",onClick:s,className:"btn btn-ghost",children:"Cancelar"}),(0,t.jsx)("button",{type:"submit",disabled:c,className:"btn btn-primary",children:c?"Creando...":"Crear Prospecto"})]})]})}}}]);